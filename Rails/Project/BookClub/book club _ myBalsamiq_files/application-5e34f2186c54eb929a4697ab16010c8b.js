(function(e){var t;e.widget("bassistance.buttonlite",{_create:function(){var n=this.options;if(this.element.is(":disabled")){n.disabled=true}this.element.bind("mouseenter.buttonlite",function(){if(n.disabled){return}e(this).addClass("ui-state-hover");if(this===t){e(this).addClass("ui-state-active")}}).bind("mouseleave.buttonlite",function(){if(n.disabled){return}e(this).removeClass("ui-state-hover").removeClass("ui-state-focus")}).bind("focus.buttonlite",function(){e(this).addClass("ui-state-focus")}).bind("blur.buttonlite",function(){e(this).removeClass("ui-state-focus")}).bind("mousedown.buttonlite",function(){if(n.disabled){return false}e(this).addClass("ui-state-active");t=this;e(document).one("mouseup",function(){t=null})}).bind("mouseup.buttonlite",function(){if(n.disabled){return false}e(this).removeClass("ui-state-active")}).bind("keydown.buttonlite",function(t){if(n.disabled){return false}if(t.keyCode==e.ui.keyCode.SPACE||t.keyCode==e.ui.keyCode.ENTER){e(this).addClass("ui-state-active")}}).bind("keyup.buttonlite",function(){e(this).removeClass("ui-state-active")});if(this.element.is("a")){this.element.keyup(function(t){if(t.keyCode===e.ui.keyCode.SPACE){e(this).click()}})}this._setOption("disabled",n.disabled)},_setOption:function(t,n){e.Widget.prototype._setOption.apply(this,arguments);if(t==="disabled"){if(n){this.element.attr("disabled",true)}else{this.element.removeAttr("disabled")}}}})})(jQuery);(function(e){e.fn.colorPicker=function(){if(this.length>0)buildSelector();return this.each(function(e){buildPicker(this)})};var t;var n=false;buildPicker=function(t){control=e("<div class='color_picker'>&nbsp;</div>");control.css("background-color",e(t).val());control.bind("click",toggleSelector);e(t).after(control);e(t).bind("change",function(){selectedValue=toHex(e(t).val());e(t).next(".color_picker").css("background-color",selectedValue)});e(t).hide()};buildSelector=function(){selector=e("<div id='color_selector'></div>");e.each(e.fn.colorPicker.defaultColors,function(n){swatch=e("<div class='color_swatch'>&nbsp;</div>");swatch.css("background-color","#"+this);swatch.bind("click",function(t){changeColor(e(this).css("background-color"))});swatch.bind("mouseover",function(t){e(this).css("border-color","#598FEF");e("input#color_value").val(toHex(e(this).css("background-color")))});swatch.bind("mouseout",function(n){e(this).css("border-color","#000");e("input#color_value").val(toHex(e(t).css("background-color")))});swatch.appendTo(selector)});hex_field=e("<label for='color_value'>Hex</label><input type='text' size='8' id='color_value'/>");hex_field.bind("keydown",function(t){if(t.keyCode==13){changeColor(e(this).val())}if(t.keyCode==27){toggleSelector()}});e("<div id='color_custom'></div>").append(hex_field).appendTo(selector);e("body").append(selector);selector.hide()};checkMouse=function(n){var r="div#color_selector";var i=e(n.target).parents(r).length;if(n.target==e(r)[0]||n.target==t||i>0)return;hideSelector()};hideSelector=function(){var t=e("div#color_selector");e(document).unbind("mousedown",checkMouse);t.hide();n=false};showSelector=function(){var r=e("div#color_selector");r.css({top:e(t).offset().top+e(t).outerHeight(),left:e(t).offset().left});hexColor=e(t).prev("input").val();e("input#color_value").val(hexColor);r.show();e(document).bind("mousedown",checkMouse);n=true};toggleSelector=function(e){t=this;n?hideSelector():showSelector()};changeColor=function(n){selectedValue=toHex(n);e(t).css("background-color",selectedValue);e(t).prev("input").val(selectedValue);e(t).prev("input").change();hideSelector()};toHex=function(e){if(e.match(/[0-9a-fA-F]{3}$/)||e.match(/[0-9a-fA-F]{6}$/)){e=e.charAt(0)=="#"?e:"#"+e}else if(e.match(/^rgb\(([0-9]|[1-9][0-9]|[1][0-9]{2}|[2][0-4][0-9]|[2][5][0-5]),[ ]{0,1}([0-9]|[1-9][0-9]|[1][0-9]{2}|[2][0-4][0-9]|[2][5][0-5]),[ ]{0,1}([0-9]|[1-9][0-9]|[1][0-9]{2}|[2][0-4][0-9]|[2][5][0-5])\)$/)){var t=[parseInt(RegExp.$1),parseInt(RegExp.$2),parseInt(RegExp.$3)];var n=function(e){if(e.length<2){for(var t=0,n=2-e.length;t<n;t++){e="0"+e}}return e};if(t.length==3){var r=n(t[0].toString(16)),i=n(t[1].toString(16)),s=n(t[2].toString(16));e="#"+r+i+s}}else e=false;return e};e.fn.colorPicker.addColors=function(t){e.fn.colorPicker.defaultColors=e.fn.colorPicker.defaultColors.concat(t)};e.fn.colorPicker.defaultColors=["000000","993300","333300","000080","333399","333333","800000","FF6600","808000","008000","008080","0000FF","666699","808080","FF0000","FF9900","99CC00","339966","33CCCC","3366FF","800080","999999","FF00FF","FFCC00","FFFF00","00FF00","00FFFF","00CCFF","993366","C0C0C0","FF99CC","FFCC99","FFFF99","CCFFFF","99CCFF","FFFFFF"]})(jQuery);(function(e){var t,n,r,i,s,o,u,a,f,l=0,c={},h=[],p=0,d={},v=[],m=null,g=new Image,y=/\.(jpg|gif|png|bmp|jpeg)(.*)?$/i,b=/[^\.]\.(swf)\s*$/i,w,E=1,S,x,T=false,N=20,C=e.extend(e("<div/>")[0],{prop:0}),k=0,L=!e.support.opacity&&!window.XMLHttpRequest,A=function(){n.hide();g.onerror=g.onload=null;if(m){m.abort()}t.empty()},O=function(){e.fancybox('<p id="fancybox_error">The requested content cannot be loaded.<br />Please try again later.</p>',{scrolling:"no",padding:20,transitionIn:"none",transitionOut:"none"})},M=function(){return[e(window).width(),e(window).height(),e(document).scrollLeft(),e(document).scrollTop()]},_=function(){var e=M(),t={},n=d.margin,r=d.autoScale,i=(N+n)*2,s=(N+n)*2,o=d.padding*2,u;if(d.width.toString().indexOf("%")>-1){t.width=e[0]*parseFloat(d.width)/100-N*2;r=false}else{t.width=d.width+o}if(d.height.toString().indexOf("%")>-1){t.height=e[1]*parseFloat(d.height)/100-N*2;r=false}else{t.height=d.height+o}if(r&&(t.width>e[0]-i||t.height>e[1]-s)){if(c.type=="image"||c.type=="swf"){i+=o;s+=o;u=Math.min(Math.min(e[0]-i,d.width)/d.width,Math.min(e[1]-s,d.height)/d.height);t.width=Math.round(u*(t.width-o))+o;t.height=Math.round(u*(t.height-o))+o}else{t.width=Math.min(t.width,e[0]-i);t.height=Math.min(t.height,e[1]-s)}}t.top=e[3]+(e[1]-(t.height+N*2))*.5;t.left=e[2]+(e[0]-(t.width+N*2))*.5;if(d.autoScale===false){t.top=Math.max(e[3]+n,t.top);t.left=Math.max(e[2]+n,t.left)}return t},D=function(e){if(e&&e.length){switch(d.titlePosition){case"inside":return e;case"over":return'<span id="fancybox-title-over">'+e+"</span>";default:return'<span id="fancybox-title-wrap"><span id="fancybox-title-left"></span><span id="fancybox-title-main">'+e+'</span><span id="fancybox-title-right"></span></span>'}}return false},P=function(){var t=d.title,n=x.width-d.padding*2,r="fancybox-title-"+d.titlePosition;e("#fancybox-title").remove();k=0;if(d.titleShow===false){return}t=e.isFunction(d.titleFormat)?d.titleFormat(t,v,p,d):D(t);if(!t||t===""){return}e('<div id="fancybox-title" class="'+r+'" />').css({width:n,paddingLeft:d.padding,paddingRight:d.padding}).html(t).appendTo("body");switch(d.titlePosition){case"inside":k=e("#fancybox-title").outerHeight(true)-d.padding;x.height+=k;break;case"over":e("#fancybox-title").css("bottom",d.padding);break;default:e("#fancybox-title").css("bottom",e("#fancybox-title").outerHeight(true)*-1);break}e("#fancybox-title").appendTo(s).hide()},H=function(){e(document).unbind("keydown.fb").bind("keydown.fb",function(t){if(t.keyCode==27&&d.enableEscapeButton){t.preventDefault();e.fancybox.close()}else if(t.keyCode==37){t.preventDefault();e.fancybox.prev()}else if(t.keyCode==39){t.preventDefault();e.fancybox.next()}});if(e.fn.mousewheel){i.unbind("mousewheel.fb");if(v.length>1){i.bind("mousewheel.fb",function(t,n){t.preventDefault();if(T||n===0){return}if(n>0){e.fancybox.prev()}else{e.fancybox.next()}})}}if(!d.showNavArrows){return}if(d.cyclic&&v.length>1||p!==0){a.show()}if(d.cyclic&&v.length>1||p!=v.length-1){f.show()}},B=function(){var e,t;if(v.length-1>p){e=v[p+1].href;if(typeof e!=="undefined"&&e.match(y)){t=new Image;t.src=e}}if(p>0){e=v[p-1].href;if(typeof e!=="undefined"&&e.match(y)){t=new Image;t.src=e}}},j=function(){o.css("overflow",d.scrolling=="auto"?d.type=="image"||d.type=="iframe"||d.type=="swf"?"hidden":"auto":d.scrolling=="yes"?"auto":"visible");if(!e.support.opacity){o.get(0).style.removeAttribute("filter");i.get(0).style.removeAttribute("filter")}e("#fancybox-title").show();if(d.hideOnContentClick){o.one("click",e.fancybox.close)}if(d.hideOnOverlayClick){r.one("click",e.fancybox.close)}if(d.showCloseButton){u.show()}H();e(window).bind("resize.fb",e.fancybox.center);if(d.centerOnScroll){e(window).bind("scroll.fb",e.fancybox.center)}else{e(window).unbind("scroll.fb")}if(e.isFunction(d.onComplete)){d.onComplete(v,p,d)}T=false;B()},F=function(e){var t=Math.round(S.width+(x.width-S.width)*e),n=Math.round(S.height+(x.height-S.height)*e),r=Math.round(S.top+(x.top-S.top)*e),s=Math.round(S.left+(x.left-S.left)*e);i.css({width:t+"px",height:n+"px",top:r+"px",left:s+"px"});t=Math.max(t-d.padding*2,0);n=Math.max(n-(d.padding*2+k*e),0);o.css({width:t+"px",height:n+"px"});if(typeof x.opacity!=="undefined"){i.css("opacity",e<.5?.5:e)}},I=function(e){var t=e.offset();t.top+=parseFloat(e.css("paddingTop"))||0;t.left+=parseFloat(e.css("paddingLeft"))||0;t.top+=parseFloat(e.css("border-top-width"))||0;t.left+=parseFloat(e.css("border-left-width"))||0;t.width=e.width();t.height=e.height();return t},q=function(){var t=c.orig?e(c.orig):false,n={},r,i;if(t&&t.length){r=I(t);n={width:r.width+d.padding*2,height:r.height+d.padding*2,top:r.top-d.padding-N,left:r.left-d.padding-N}}else{i=M();n={width:1,height:1,top:i[3]+i[1]*.5,left:i[2]+i[0]*.5}}return n},R=function(){n.hide();if(i.is(":visible")&&e.isFunction(d.onCleanup)){if(d.onCleanup(v,p,d)===false){e.event.trigger("fancybox-cancel");T=false;return}}v=h;p=l;d=c;o.get(0).scrollTop=0;o.get(0).scrollLeft=0;if(d.overlayShow){if(L){e("select:not(#fancybox-tmp select)").filter(function(){return this.style.visibility!=="hidden"}).css({visibility:"hidden"}).one("fancybox-cleanup",function(){this.style.visibility="inherit"})}r.css({"background-color":d.overlayColor,opacity:d.overlayOpacity}).unbind().show()}x=_();P();if(i.is(":visible")){e(u.add(a).add(f)).hide();var s=i.position(),m;S={top:s.top,left:s.left,width:i.width(),height:i.height()};m=S.width==x.width&&S.height==x.height;o.fadeOut(d.changeFade,function(){var n=function(){o.html(t.contents()).fadeIn(d.changeFade,j)};e.event.trigger("fancybox-change");o.empty().css("overflow","hidden");if(m){o.css({top:d.padding,left:d.padding,width:Math.max(x.width-d.padding*2,1),height:Math.max(x.height-d.padding*2-k,1)});n()}else{o.css({top:d.padding,left:d.padding,width:Math.max(S.width-d.padding*2,1),height:Math.max(S.height-d.padding*2,1)});C.prop=0;e(C).animate({prop:1},{duration:d.changeSpeed,easing:d.easingChange,step:F,complete:n})}});return}i.css("opacity",1);if(d.transitionIn=="elastic"){S=q();o.css({top:d.padding,left:d.padding,width:Math.max(S.width-d.padding*2,1),height:Math.max(S.height-d.padding*2,1)}).html(t.contents());i.css(S).show();if(d.opacity){x.opacity=0}C.prop=0;e(C).animate({prop:1},{duration:d.speedIn,easing:d.easingIn,step:F,complete:j})}else{o.css({top:d.padding,left:d.padding,width:Math.max(x.width-d.padding*2,1),height:Math.max(x.height-d.padding*2-k,1)}).html(t.contents());i.css(x).fadeIn(d.transitionIn=="none"?0:d.speedIn,j)}},U=function(){t.width(c.width);t.height(c.height);if(c.width=="auto"){c.width=t.width()}if(c.height=="auto"){c.height=t.height()}R()},z=function(){T=true;c.width=g.width;c.height=g.height;e("<img />").attr({id:"fancybox-img",src:g.src,alt:c.title}).appendTo(t);R()},W=function(){A();var n=h[l],r,i,s,u,a,f,p;c=e.extend({},e.fn.fancybox.defaults,typeof e(n).data("fancybox")=="undefined"?c:e(n).data("fancybox"));s=n.title||e(n).title||c.title||"";if(n.nodeName&&!c.orig){c.orig=e(n).children("img:first").length?e(n).children("img:first"):e(n)}if(s===""&&c.orig){s=c.orig.attr("alt")}if(n.nodeName&&/^(?:javascript|#)/i.test(n.href)){r=c.href||null}else{r=c.href||n.href||null}if(c.type){i=c.type;if(!r){r=c.content}}else if(c.content){i="html"}else if(r){if(r.match(y)){i="image"}else if(r.match(b)){i="swf"}else if(e(n).hasClass("iframe")){i="iframe"}else if(r.match(/#/)){n=r.substr(r.indexOf("#"));i=e(n).length>0?"inline":"ajax"}else{i="ajax"}}else{i="inline"}c.type=i;c.href=r;c.title=s;if(c.autoDimensions&&c.type!=="iframe"&&c.type!=="swf"){c.width="auto";c.height="auto"}if(c.modal){c.overlayShow=true;c.hideOnOverlayClick=false;c.hideOnContentClick=false;c.enableEscapeButton=false;c.showCloseButton=false}if(e.isFunction(c.onStart)){if(c.onStart(h,l,c)===false){T=false;return}}t.css("padding",N+c.padding+c.margin);e(".fancybox-inline-tmp").unbind("fancybox-cancel").bind("fancybox-change",function(){e(this).replaceWith(o.children())});switch(i){case"html":t.html(c.content);U();break;case"inline":e('<div class="fancybox-inline-tmp" />').hide().insertBefore(e(n)).bind("fancybox-cleanup",function(){e(this).replaceWith(o.children())}).bind("fancybox-cancel",function(){e(this).replaceWith(t.children())});e(n).appendTo(t);U();break;case"image":T=false;e.fancybox.showActivity();g=new Image;g.onerror=function(){O()};g.onload=function(){g.onerror=null;g.onload=null;z()};g.src=r;break;case"swf":u='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="'+c.width+'" height="'+c.height+'"><param name="movie" value="'+r+'"></param>';a="";e.each(c.swf,function(e,t){u+='<param name="'+e+'" value="'+t+'"></param>';a+=" "+e+'="'+t+'"'});u+='<embed src="'+r+'" type="application/x-shockwave-flash" width="'+c.width+'" height="'+c.height+'"'+a+"></embed></object>";t.html(u);U();break;case"ajax":f=r.split("#",2);p=c.ajax.data||{};if(f.length>1){r=f[0];if(typeof p=="string"){p+="&selector="+f[1]}else{p.selector=f[1]}}T=false;e.fancybox.showActivity();m=e.ajax(e.extend(c.ajax,{url:r,data:p,error:O,success:function(e,n,r){if(m.status==200){t.html(e);U()}}}));break;case"iframe":e('<iframe id="fancybox-frame" name="fancybox-frame'+(new Date).getTime()+'" frameborder="0" hspace="0" scrolling="'+c.scrolling+'" src="'+c.href+'"></iframe>').appendTo(t);R();break}},X=function(){if(!n.is(":visible")){clearInterval(w);return}e("div",n).css("top",E*-40+"px");E=(E+1)%12},V=function(){if(e("#fancybox-wrap").length){return}e("body").append(t=e('<div id="fancybox-tmp"></div>'),n=e('<div id="fancybox-loading"><div></div></div>'),r=e('<div id="fancybox-overlay"></div>'),i=e('<div id="fancybox-wrap"></div>'));if(!e.support.opacity){i.addClass("fancybox-ie");n.addClass("fancybox-ie")}s=e('<div id="fancybox-outer"></div>').append('<div class="fancy-bg" id="fancy-bg-n"></div><div class="fancy-bg" id="fancy-bg-ne"></div><div class="fancy-bg" id="fancy-bg-e"></div><div class="fancy-bg" id="fancy-bg-se"></div><div class="fancy-bg" id="fancy-bg-s"></div><div class="fancy-bg" id="fancy-bg-sw"></div><div class="fancy-bg" id="fancy-bg-w"></div><div class="fancy-bg" id="fancy-bg-nw"></div>').appendTo(i);s.append(o=e('<div id="fancybox-inner"></div>'),u=e('<a id="fancybox-close"></a>'),a=e('<a href="javascript:;" id="fancybox-left"><span class="fancy-ico" id="fancybox-left-ico"></span></a>'),f=e('<a href="javascript:;" id="fancybox-right"><span class="fancy-ico" id="fancybox-right-ico"></span></a>'));u.click(e.fancybox.close);n.click(e.fancybox.cancel);a.click(function(t){t.preventDefault();e.fancybox.prev()});f.click(function(t){t.preventDefault();e.fancybox.next()});if(L){r.get(0).style.setExpression("height","document.body.scrollHeight > document.body.offsetHeight ? document.body.scrollHeight : document.body.offsetHeight + 'px'");n.get(0).style.setExpression("top","(-20 + (document.documentElement.clientHeight ? document.documentElement.clientHeight/2 : document.body.clientHeight/2 ) + ( ignoreMe = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop )) + 'px'");s.prepend('<iframe id="fancybox-hide-sel-frame" src="javascript:\'\';" scrolling="no" frameborder="0" ></iframe>')}};e.fn.fancybox=function(t){e(this).data("fancybox",e.extend({},t,e.metadata?e(this).metadata():{})).unbind("click.fb").bind("click.fb",function(t){t.preventDefault();if(T){return}T=true;e(this).blur();h=[];l=0;var n=e(this).attr("rel")||"";if(!n||n==""||n==="nofollow"){h.push(this)}else{h=e("a[rel="+n+"], area[rel="+n+"]");l=h.index(this)}W();return false});return this};e.fancybox=function(t){if(T){return}T=true;var n=typeof arguments[1]!=="undefined"?arguments[1]:{};h=[];l=n.index||0;if(e.isArray(t)){for(var r=0,i=t.length;r<i;r++){if(typeof t[r]=="object"){e(t[r]).data("fancybox",e.extend({},n,t[r]))}else{t[r]=e({}).data("fancybox",e.extend({content:t[r]},n))}}h=jQuery.merge(h,t)}else{if(typeof t=="object"){e(t).data("fancybox",e.extend({},n,t))}else{t=e({}).data("fancybox",e.extend({content:t},n))}h.push(t)}if(l>h.length||l<0){l=0}W()};e.fancybox.showActivity=function(){clearInterval(w);n.show();w=setInterval(X,66)};e.fancybox.hideActivity=function(){n.hide()};e.fancybox.next=function(){return e.fancybox.pos(p+1)};e.fancybox.prev=function(){return e.fancybox.pos(p-1)};e.fancybox.pos=function(e){if(T){return}e=parseInt(e,10);if(e>-1&&v.length>e){l=e;W()}if(d.cyclic&&v.length>1&&e<0){l=v.length-1;W()}if(d.cyclic&&v.length>1&&e>=v.length){l=0;W()}return};e.fancybox.cancel=function(){if(T){return}T=true;e.event.trigger("fancybox-cancel");A();if(c&&e.isFunction(c.onCancel)){c.onCancel(h,l,c)}T=false};e.fancybox.close=function(){function t(){r.fadeOut("fast");i.hide();e.event.trigger("fancybox-cleanup");o.empty();if(e.isFunction(d.onClosed)){d.onClosed(v,p,d)}v=c=[];p=l=0;d=c={};T=false}if(T||i.is(":hidden")){return}T=true;if(d&&e.isFunction(d.onCleanup)){if(d.onCleanup(v,p,d)===false){T=false;return}}A();e(u.add(a).add(f)).hide();e("#fancybox-title").remove();i.add(o).add(r).unbind();e(window).unbind("resize.fb scroll.fb");e(document).unbind("keydown.fb");o.css("overflow","hidden");if(d.transitionOut=="elastic"){S=q();var n=i.position();x={top:n.top,left:n.left,width:i.width(),height:i.height()};if(d.opacity){x.opacity=1}C.prop=1;e(C).animate({prop:0},{duration:d.speedOut,easing:d.easingOut,step:F,complete:t})}else{i.fadeOut(d.transitionOut=="none"?0:d.speedOut,t)}};e.fancybox.resize=function(){var t,n;if(T||i.is(":hidden")){return}T=true;t=o.wrapInner("<div style='overflow:auto'></div>").children();n=t.height();i.css({height:n+d.padding*2+k});o.css({height:n});t.replaceWith(t.children());e.fancybox.center()};e.fancybox.center=function(){T=true;var e=M(),t=d.margin,n={};n.top=e[3]+(e[1]-(i.height()-k+N*2))*.5;n.left=e[2]+(e[0]-(i.width()+N*2))*.5;n.top=Math.max(e[3]+t,n.top);n.left=Math.max(e[2]+t,n.left);i.css(n);T=false};e.fn.fancybox.defaults={padding:10,margin:20,opacity:false,modal:false,cyclic:false,scrolling:"auto",width:560,height:340,autoScale:true,autoDimensions:true,centerOnScroll:false,ajax:{},swf:{wmode:"transparent"},hideOnOverlayClick:true,hideOnContentClick:false,overlayShow:true,overlayOpacity:.3,overlayColor:"#666",titleShow:true,titlePosition:"outside",titleFormat:null,transitionIn:"fade",transitionOut:"fade",speedIn:300,speedOut:300,changeSpeed:300,changeFade:"fast",easingIn:"swing",easingOut:"swing",showCloseButton:true,showNavArrows:true,enableEscapeButton:true,onStart:null,onCancel:null,onComplete:null,onCleanup:null,onClosed:null};e(document).ready(function(){V()})})(jQuery);(function($){$.fn.editable=function(e,t){if("disable"==e){$(this).data("disabled.editable",true);return}if("enable"==e){$(this).data("disabled.editable",false);return}if("destroy"==e){$(this).unbind($(this).data("event.editable")).removeData("disabled.editable").removeData("event.editable");return}var n=$.extend({},$.fn.editable.defaults,{target:e},t);var r=$.editable.types[n.type].plugin||function(){};var i=$.editable.types[n.type].submit||function(){};var s=$.editable.types[n.type].buttons||$.editable.types["defaults"].buttons;var o=$.editable.types[n.type].content||$.editable.types["defaults"].content;var u=$.editable.types[n.type].element||$.editable.types["defaults"].element;var a=$.editable.types[n.type].reset||$.editable.types["defaults"].reset;var f=n.callback||function(){};var l=n.onedit||function(){};var c=n.onsubmit||function(){};var h=n.onreset||function(){};var p=n.onerror||a;if(n.tooltip){$(this).attr("title",n.tooltip)}n.autowidth="auto"==n.width;n.autoheight="auto"==n.height;return this.each(function(){var e=this;var t=$(e).width();var d=$(e).height();$(this).data("event.editable",n.event);if(!$.trim($(this).html())){$(this).html(n.placeholder)}$(this).bind(n.event,function(h){if(true===$(this).data("disabled.editable")){return}if(e.editing){return}if(false===l.apply(this,[n,e])){return}h.preventDefault();h.stopPropagation();if(n.tooltip){$(e).removeAttr("title")}if(0==$(e).width()){n.width=t;n.height=d}else{if(n.width!="none"){n.width=n.autowidth?$(e).width():n.width}if(n.height!="none"){n.height=n.autoheight?$(e).height():n.height}}if($(this).html().toLowerCase().replace(/(;|"|\/)/g,"")==n.placeholder.toLowerCase().replace(/(;|"|\/)/g,"")){$(this).html("")}e.editing=true;e.noblur=false;e.revert=$(e).html();$(e).html("");var v=$("<form />");if(n.cssclass){if("inherit"==n.cssclass){v.attr("class",$(e).attr("class"))}else{v.attr("class",n.cssclass)}}if(n.style){if("inherit"==n.style){v.attr("style",$(e).attr("style"));v.css("display",$(e).css("display"))}else{v.attr("style",n.style)}}var m=u.apply(v,[n,e]);var g;if(n.loadurl){var y=setTimeout(function(){m.disabled=true;o.apply(v,[n.loadtext,n,e])},100);var b={};if($.isFunction(n.loaddata)){$.extend(b,n.loaddata.apply(e,[e.revert,n]))}else{$.extend(b,n.loaddata)}$.ajax({type:n.loadtype,url:n.loadurl,data:b,async:false,success:function(e){window.clearTimeout(y);g=e;m.disabled=false}})}else if(n.data){g=n.data;if($.isFunction(n.data)){g=n.data.apply(e,[e.revert,n])}}else{g=e.revert}o.apply(v,[g,n,e]);m.attr("name",n.name);s.apply(v,[n,e]);$(e).append(v);r.apply(v,[n,e]);$(":input:visible:enabled:first",v).focus();if(n.select){m.select()}m.keydown(function(t){if(t.keyCode==27){t.preventDefault();a.apply(v,[n,e])}});var y;if("cancel"==n.onblur){m.blur(function(t){y=setTimeout(function(){a.apply(v,[n,e])},500)})}else if("submit"==n.onblur){m.blur(function(t){if(!e.noblur){y=setTimeout(function(){v.submit()},200)}})}else if($.isFunction(n.onblur)){m.blur(function(t){n.onblur.apply(e,[m.val(),n])})}else{m.blur(function(e){})}v.submit(function(t){if(y){clearTimeout(y)}t.preventDefault();if(false!==c.apply(v,[n,e])){if(false!==i.apply(v,[n,e])){if($.isFunction(n.target)){var r=n.target.apply(e,[m.val(),n]);$(e).html(r);e.editing=false;f.apply(e,[e.innerHTML,n]);if(!$.trim($(e).html())){$(e).html(n.placeholder)}}else{var s={};s[n.name]=m.val();s[n.id]=e.id;if($.isFunction(n.submitdata)){$.extend(s,n.submitdata.apply(e,[e.revert,n]))}else{$.extend(s,n.submitdata)}if("PUT"==n.method){s["_method"]="put"}$(e).html(n.indicator);var o={type:"POST",data:s,dataType:"html",url:n.target,success:function(t,r){if(o.dataType=="html"){$(e).html(t)}e.editing=false;f.apply(e,[t,n]);if(!$.trim($(e).html())){$(e).html(n.placeholder)}},error:function(t,r,i){p.apply(v,[n,e,t])}};$.extend(o,n.ajaxoptions);$.ajax(o)}}}$(e).attr("title",n.tooltip);return false})});this.reset=function(t){if(this.editing){if(false!==h.apply(t,[n,e])){$(e).html(e.revert);e.editing=false;if(!$.trim($(e).html())){$(e).html(n.placeholder)}if(n.tooltip){$(e).attr("title",n.tooltip)}}}}})};$.editable={types:{defaults:{element:function(e,t){var n=$('<input type="hidden"></input>');$(this).append(n);return n},content:function(e,t,n){$(":input:first",this).val(e)},reset:function(e,t){t.reset(this)},buttons:function(e,t){var n=this;if(e.submit){if(e.submit.match(/>$/)){var r=$(e.submit).click(function(){if(r.attr("type")!="submit"){n.submit()}})}else{var r=$('<button type="submit" />');r.html(e.submit)}$(this).append(r)}if(e.cancel){if(e.cancel.match(/>$/)){var i=$(e.cancel)}else{var i=$('<button type="cancel" />');i.html(e.cancel)}$(this).append(i);$(i).click(function(r){if($.isFunction($.editable.types[e.type].reset)){var i=$.editable.types[e.type].reset}else{var i=$.editable.types["defaults"].reset}i.apply(n,[e,t]);return false});$(i).mouseenter(function(e){t.noblur=true});$(i).mouseleave(function(e){t.noblur=false})}}},text:{element:function(e,t){var n=$("<input />");if(e.width!="none"){n.attr("width",e.width)}if(e.height!="none"){n.attr("height",e.height)}n.attr("autocomplete","off");$(this).append(n);return n}},textarea:{element:function(e,t){var n=$("<textarea />");if(e.rows){n.attr("rows",e.rows)}else if(e.height!="none"){n.height(e.height)}if(e.cols){n.attr("cols",e.cols)}else if(e.width!="none"){n.width(e.width)}$(this).append(n);return n}},select:{element:function(e,t){var n=$("<select />");$(this).append(n);return n},content:function(data,settings,original){if(String==data.constructor){eval("var json = "+data)}else{var json=data}for(var key in json){if(!json.hasOwnProperty(key)){continue}if("selected"==key){continue}var option=$("<option />").val(key).append(json[key]);$("select",this).append(option)}$("select",this).children().each(function(){if($(this).val()==json["selected"]||$(this).text()==$.trim(original.revert)){$(this).attr("selected","selected")}});if(!settings.submit){var form=this;$("select",this).change(function(){form.submit()})}}}},addInputType:function(e,t){$.editable.types[e]=t}};$.fn.editable.defaults={name:"value",id:"id",type:"text",width:"auto",height:"auto",event:"click.editable",onblur:"cancel",loadtype:"GET",loadtext:"Loading...",placeholder:"Click to edit",loaddata:{},submitdata:{},ajaxoptions:{}}})(jQuery);(function($){var escapeable=/["\\\x00-\x1f\x7f-\x9f]/g,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};$.toJSON=typeof JSON==="object"&&JSON.stringify?JSON.stringify:function(e){if(e===null){return"null"}var t=typeof e;if(t==="undefined"){return undefined}if(t==="number"||t==="boolean"){return""+e}if(t==="string"){return $.quoteString(e)}if(t==="object"){if(typeof e.toJSON==="function"){return $.toJSON(e.toJSON())}if(e.constructor===Date){var n=e.getUTCMonth()+1,r=e.getUTCDate(),i=e.getUTCFullYear(),s=e.getUTCHours(),o=e.getUTCMinutes(),u=e.getUTCSeconds(),a=e.getUTCMilliseconds();if(n<10){n="0"+n}if(r<10){r="0"+r}if(s<10){s="0"+s}if(o<10){o="0"+o}if(u<10){u="0"+u}if(a<100){a="0"+a}if(a<10){a="0"+a}return'"'+i+"-"+n+"-"+r+"T"+s+":"+o+":"+u+"."+a+'Z"'}if(e.constructor===Array){var f=[];for(var l=0;l<e.length;l++){f.push($.toJSON(e[l])||"null")}return"["+f.join(",")+"]"}var c,h,p=[];for(var d in e){t=typeof d;if(t==="number"){c='"'+d+'"'}else if(t==="string"){c=$.quoteString(d)}else{continue}t=typeof e[d];if(t==="function"||t==="undefined"){continue}h=$.toJSON(e[d]);p.push(c+":"+h)}return"{"+p.join(",")+"}"}};$.evalJSON=typeof JSON==="object"&&JSON.parse?JSON.parse:function(src){return eval("("+src+")")};$.secureEvalJSON=typeof JSON==="object"&&JSON.parse?JSON.parse:function(src){var filtered=src.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"");if(/^[\],:{}\s]*$/.test(filtered)){return eval("("+src+")")}else{throw new SyntaxError("Error parsing JSON, source is not valid.")}};$.quoteString=function(e){if(e.match(escapeable)){return'"'+e.replace(escapeable,function(e){var t=meta[e];if(typeof t==="string"){return t}t=e.charCodeAt();return"\\u00"+Math.floor(t/16).toString(16)+(t%16).toString(16)})+'"'}return'"'+e+'"'}})(jQuery);$.fn.stickyfloat=function(e,t){var n=this;var r=parseInt(n.parent().css("padding-top"));var i=n.parent().offset().top;var s=$.extend({startOffset:i,offsetY:r,duration:0,lockBottom:true},e);n.css({position:"absolute"});if(s.lockBottom){var o=n.parent().height()-n.height()+r;if(o<0)o=0}$(window).scroll(function(){n.stop();var e=$(document).scrollTop()>s.startOffset;var t=n.offset().top>i;var u=n.outerHeight()<$(window).height();if((e||t)&&u){var a=$(document).scrollTop()-i+s.offsetY;if(a>o)a=o;if($(document).scrollTop()<s.startOffset)a=r;n.animate({top:a},s.duration)}})};(function(e){function c(t,n,r,o){var u={data:o||o===0||o===false?o:n?n.data:{},_wrap:n?n._wrap:null,tmpl:null,parent:n||null,nodes:[],calls:b,nest:w,wrap:E,html:S,update:x};t&&e.extend(u,t,{nodes:[],parent:n});if(r){u.tmpl=r;u._ctnt=u._ctnt||u.tmpl(e,u);u.key=++a;(l.length?s:i)[a]=u}return u}function h(t,r,i){var s,o=i?e.map(i,function(e){return typeof e==="string"?t.key?e.replace(/(<\w+)(?=[\s>])(?![^>]*_tmplitem)([^>]*)/g,"$1 "+n+'="'+t.key+'" $2'):e:h(e,t,e._ctnt)}):t;if(r)return o;o=o.join("");o.replace(/^\s*([^<\s][^<]*)?(<[\w\W]+>)([^>]*[^>\s])?\s*$/,function(t,n,r,i){s=e(r).get();y(s);if(n)s=p(n).concat(s);if(i)s=s.concat(p(i))});return s?s:p(o)}function p(t){var n=document.createElement("div");n.innerHTML=t;return e.makeArray(n.childNodes)}function d(t){return new Function("jQuery","$item","var $=jQuery,call,__=[],$data=$item.data;with($data){__.push('"+e.trim(t).replace(/([\\'])/g,"\\$1").replace(/[\r\t\n]/g," ").replace(/\$\{([^\}]*)\}/g,"{{= $1}}").replace(/\{\{(\/?)(\w+|.)(?:\(((?:[^\}]|\}(?!\}))*?)?\))?(?:\s+(.*?)?)?(\(((?:[^\}]|\}(?!\}))*?)\))?\s*\}\}/g,function(t,n,r,i,s,o,u){var a=e.tmpl.tag[r],f,l,c;if(!a)throw"Unknown template tag: "+r;f=a._default||[];if(o&&!/\w$/.test(s)){s+=o;o=""}if(s){s=m(s);u=u?","+m(u)+")":o?")":"";l=o?s.indexOf(".")>-1?s+m(o):"("+s+").call($item"+u:s;c=o?l:"(typeof("+s+")==='function'?("+s+").call($item):("+s+"))"}else c=l=f.$1||"null";i=m(i);return"');"+a[n?"close":"open"].split("$notnull_1").join(s?"typeof("+s+")!=='undefined' && ("+s+")!=null":"true").split("$1a").join(c).split("$1").join(l).split("$2").join(i||f.$2||"")+"__.push('"})+"');}return __;")}function v(t,n){t._wrap=h(t,true,e.isArray(n)?n:[r.test(n)?n:e(n).html()]).join("")}function m(e){return e?e.replace(/\\'/g,"'").replace(/\\\\/g,"\\"):null}function g(e){var t=document.createElement("div");t.appendChild(e.cloneNode(true));return t.innerHTML}function y(t){function v(t){function v(e){e=e+r;p=l[e]=l[e]||c(p,i[p.parent.key+r]||p.parent)}var o,u=t,h,p,d;if(d=t.getAttribute(n)){while(u.parentNode&&(u=u.parentNode).nodeType===1&&!(o=u.getAttribute(n)));if(o!==d){u=u.parentNode?u.nodeType===11?0:u.getAttribute(n)||0:0;if(!(p=i[d])){p=s[d];p=c(p,i[u]||s[u]);p.key=++a;i[a]=p}f&&v(d)}t.removeAttribute(n)}else if(f&&(p=e.data(t,"tmplItem"))){v(p.key);i[p.key]=p;u=e.data(t.parentNode,"tmplItem");u=u?u.key:0}if(p){h=p;while(h&&h.key!=u){h.nodes.push(t);h=h.parent}delete p._ctnt;delete p._wrap;e.data(t,"tmplItem",p)}}var r="_"+f,o,u,l={},h,p,d;for(h=0,p=t.length;h<p;h++){if((o=t[h]).nodeType!==1)continue;u=o.getElementsByTagName("*");for(d=u.length-1;d>=0;d--)v(u[d]);v(o)}}function b(e,t,n,r){if(!e)return l.pop();l.push({_:e,tmpl:t,item:this,data:n,options:r})}function w(t,n,r){return e.tmpl(e.template(t),n,r,this)}function E(t,n){var r=t.options||{};r.wrapped=n;return e.tmpl(e.template(t.tmpl),t.data,r,t.item)}function S(t,n){var r=this._wrap;return e.map(e(e.isArray(r)?r.join(""):r).filter(t||"*"),function(e){return n?e.innerText||e.textContent:e.outerHTML||g(e)})}function x(){var t=this.nodes;e.tmpl(null,null,null,this).insertBefore(t[0]);e(t).remove()}var t=e.fn.domManip,n="_tmplitem",r=/^[^<]*(<[\w\W]+>)[^>]*$|\{\{\! /,i={},s={},o,u={key:0,data:{}},a=0,f=0,l=[];e.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,n){e.fn[t]=function(r){var s=[],u=e(r),a,l,c,h,p=this.length===1&&this[0].parentNode;o=i||{};if(p&&p.nodeType===11&&p.childNodes.length===1&&u.length===1){u[n](this[0]);s=this}else{for(l=0,c=u.length;l<c;l++){f=l;a=(l>0?this.clone(true):this).get();e(u[l])[n](a);s=s.concat(a)}f=0;s=this.pushStack(s,t,u.selector)}h=o;o=null;e.tmpl.complete(h);return s}});e.fn.extend({tmpl:function(t,n,r){return e.tmpl(this[0],t,n,r)},tmplItem:function(){return e.tmplItem(this[0])},template:function(t){return e.template(t,this[0])},domManip:function(n,r,s){if(n[0]&&e.isArray(n[0])){var u=e.makeArray(arguments),a=n[0],l=a.length,c=0,h;while(c<l&&!(h=e.data(a[c++],"tmplItem")));if(h&&f)u[2]=function(t){e.tmpl.afterManip(this,t,s)};t.apply(this,u)}else t.apply(this,arguments);f=0;!o&&e.tmpl.complete(i);return this}});e.extend({tmpl:function(t,n,r,o){var a,f=!o;if(f){o=u;t=e.template[t]||e.template(null,t);s={}}else if(!t){t=o.tmpl;i[o.key]=o;o.nodes=[];o.wrapped&&v(o,o.wrapped);return e(h(o,null,o.tmpl(e,o)))}if(!t)return[];if(typeof n==="function")n=n.call(o||{});r&&r.wrapped&&v(r,r.wrapped);a=e.isArray(n)?e.map(n,function(e){return e?c(r,o,t,e):null}):[c(r,o,t,n)];return f?e(h(o,null,a)):a},tmplItem:function(t){var n;if(t instanceof e)t=t[0];while(t&&t.nodeType===1&&!(n=e.data(t,"tmplItem"))&&(t=t.parentNode));return n||u},template:function(t,n){if(n){if(typeof n==="string")n=d(n);else if(n instanceof e)n=n[0]||{};if(n.nodeType)n=e.data(n,"tmpl")||e.data(n,"tmpl",d(n.innerHTML));return typeof t==="string"?e.template[t]=n:n}return t?typeof t!=="string"?e.template(null,t):e.template[t]||e.template(null,r.test(t)?t:e(t)):null},encode:function(e){return(""+e).split("<").join("&lt;").split(">").join("&gt;").split('"').join("&#34;").split("'").join("&#39;")}});e.extend(e.tmpl,{tag:{tmpl:{_default:{$2:"null"},open:"if($notnull_1){__=__.concat($item.nest($1,$2));}"},wrap:{_default:{$2:"null"},open:"$item.calls(__,$1,$2);__=[];",close:"call=$item.calls();__=call._.concat($item.wrap(call,__));"},each:{_default:{$2:"$index, $value"},open:"if($notnull_1){$.each($1a,function($2){with(this){",close:"}});}"},"if":{open:"if(($notnull_1) && $1a){",close:"}"},"else":{_default:{$1:"true"},open:"}else if(($notnull_1) && $1a){"},html:{open:"if($notnull_1){__.push($1a);}"},"=":{_default:{$1:"$data"},open:"if($notnull_1){__.push($.encode($1a));}"},"!":{open:""}},complete:function(){i={}},afterManip:function(t,n,r){var i=n.nodeType===11?e.makeArray(n.childNodes):n.nodeType===1?[n]:[];r.call(t,n);y(i);f++}})})(jQuery);(function(e){function n(e,t){return e.nodeType==3?i(e,t):r(e,t)}function r(t,r){var t=e(t);var i=t.clone().empty();var s;t.contents().each(function(){var e=r-i.text().length;if(e==0)return;s=n(this,e);if(s)i.append(s)});return i}function i(n,r){var i=s(n.data);if(t)i=i.replace(/^ /,"");t=!!i.match(/ $/);var i=i.slice(0,r);i=e("<div/>").text(i).html();return i}function s(e){return e.replace(/\s+/g," ")}function o(t){var n=e(t);var r=n.children(":last");if(!r)return t;var i=r.css("display");if(!i||i=="inline")return n;return o(r)}function u(t){var n=e(t);var r=n.children(":last");if(r&&r.is("p"))return r;return t}var t=true;e.fn.truncate=function(t){var r=e.extend({},e.fn.truncate.defaults,t);e(this).each(function(){var t=e.trim(s(e(this).text())).length;if(t<=r.max_length)return;var i=r.max_length-r.more.length-3;var a=n(this,i);var f=e(this);if(r.collapsed){f.hide()}else{a.hide()}a.insertAfter(f);o(a).append('... <a href="#show more content" class="teaserlink">'+r.more+"</a>");u(f).append(' <a href="#show less content" class="teaserlink">'+r.less+"</a>");a.find("a:last").click(function(){a.hide();f.show();return false});f.find("a:last").click(function(){a.show();f.hide();return false})})};e.fn.truncate.defaults={max_length:100,more:"More...",less:"Less...",collapsed:true};})(jQuery);(function(e){e.widget("ui.selectmenu",{_init:function(){var t=this,n=this.options;this.ids=[this.element.attr("id")+"-"+"button",this.element.attr("id")+"-"+"menu"];this._safemouseup=true;this.newelement=e('<a class="'+this.widgetBaseClass+' ui-widget ui-state-default ui-corner-all" id="'+this.ids[0]+'" role="button" href="#" aria-haspopup="true" aria-owns="'+this.ids[1]+'"></a>').insertAfter(this.element);var r=this.element.attr("tabindex");if(r){this.newelement.attr("tabindex",r)}this.newelement.data("selectelement",this.element);this.selectmenuIcon=e('<span class="'+this.widgetBaseClass+'-icon ui-icon"></span>').prependTo(this.newelement).addClass(n.style=="popup"?"ui-icon-triangle-2-n-s":"ui-icon-triangle-1-s");e("label[for="+this.element.attr("id")+"]").attr("for",this.ids[0]).bind("click",function(){t.newelement[0].focus();return false});this.newelement.bind("mousedown",function(e){t._toggle(e);if(n.style=="popup"){t._safemouseup=false;setTimeout(function(){t._safemouseup=true},300)}return false}).bind("click",function(){return false}).keydown(function(n){var r=true;switch(n.keyCode){case e.ui.keyCode.ENTER:r=true;break;case e.ui.keyCode.SPACE:r=false;t._toggle(n);break;case e.ui.keyCode.UP:case e.ui.keyCode.LEFT:r=false;t._moveSelection(-1);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.RIGHT:r=false;t._moveSelection(1);break;case e.ui.keyCode.TAB:r=true;break;default:r=false;t._typeAhead(n.keyCode,"mouseup");break}return r}).bind("mouseover focus",function(){e(this).addClass(t.widgetBaseClass+"-focus ui-state-hover")}).bind("mouseout blur",function(){e(this).removeClass(t.widgetBaseClass+"-focus ui-state-hover")});e(document).mousedown(function(e){t.close(e)});this.element.click(function(){this._refreshValue()}).focus(function(){this.newelement[0].focus()});var i=n.style=="dropdown"?" ui-corner-bottom":" ui-corner-all";this.list=e('<ul class="'+t.widgetBaseClass+"-menu ui-widget ui-widget-content"+i+'" aria-hidden="true" role="listbox" aria-labelledby="'+this.ids[0]+'" id="'+this.ids[1]+'"></ul>').appendTo("body");var s=[];this.element.find("option").each(function(){s.push({value:e(this).attr("value"),text:t._formatText(jQuery(this).text()),selected:e(this).attr("selected"),classes:e(this).attr("class"),parentOptGroup:e(this).parent("optgroup").attr("label")})});var o=t.options.style=="popup"?" ui-state-active":"";for(var u in s){var a=e('<li role="presentation"><a href="#" tabindex="-1" role="option" aria-selected="false">'+s[u].text+"</a></li>").data("index",u).addClass(s[u].classes).data("optionClasses",s[u].classes||"").mouseup(function(n){if(t._safemouseup){var r=e(this).data("index")!=t._selectedIndex();t.value(e(this).data("index"));t.select(n);if(r){t.change(n)}t.close(n,true)}return false}).click(function(){return false}).bind("mouseover focus",function(){t._selectedOptionLi().addClass(o);t._focusedOptionLi().removeClass(t.widgetBaseClass+"-item-focus ui-state-hover");e(this).removeClass("ui-state-active").addClass(t.widgetBaseClass+"-item-focus ui-state-hover")}).bind("mouseout blur",function(){if(e(this).is(t._selectedOptionLi())){e(this).addClass(o)}e(this).removeClass(t.widgetBaseClass+"-item-focus ui-state-hover")});if(s[u].parentOptGroup){var f=t.widgetBaseClass+"-group-"+s[u].parentOptGroup;if(this.list.find("li."+f).size()){this.list.find("li."+f+":last ul").append(a)}else{e('<li role="presentation" class="'+t.widgetBaseClass+"-group "+f+'"><span class="'+t.widgetBaseClass+'-group-label">'+s[u].parentOptGroup+"</span><ul></ul></li>").appendTo(this.list).find("ul").append(a)}}else{a.appendTo(this.list)}this.list.bind("mousedown mouseup",function(){return false});if(n.icons){for(var l in n.icons){if(a.is(n.icons[l].find)){a.data("optionClasses",s[u].classes+" "+t.widgetBaseClass+"-hasIcon").addClass(t.widgetBaseClass+"-hasIcon");var c=n.icons[l].icon||"";a.find("a:eq(0)").prepend('<span class="'+t.widgetBaseClass+"-item-icon ui-icon "+c+'"></span>')}}}}this.list.find("li:last").addClass("ui-corner-bottom");if(n.style=="popup"){this.list.find("li:first").addClass("ui-corner-top")}if(n.transferClasses){var h=this.element.attr("class")||"";this.newelement.add(this.list).addClass(h)}var p=this.element.width();this.newelement.width(n.width?n.width:p);if(n.style=="dropdown"){this.list.width(n.menuWidth?n.menuWidth:n.width?n.width:p)}else{this.list.width(n.menuWidth?n.menuWidth:n.width?n.width-n.handleWidth:p-n.handleWidth)}if(n.maxHeight&&n.maxHeight<this.list.height()){this.list.height(n.maxHeight)}this._optionLis=this.list.find("li:not(."+t.widgetBaseClass+"-group)");this.list.keydown(function(n){var r=true;switch(n.keyCode){case e.ui.keyCode.UP:case e.ui.keyCode.LEFT:r=false;t._moveFocus(-1);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.RIGHT:r=false;t._moveFocus(1);break;case e.ui.keyCode.HOME:r=false;t._moveFocus(":first");break;case e.ui.keyCode.PAGE_UP:r=false;t._scrollPage("up");break;case e.ui.keyCode.PAGE_DOWN:r=false;t._scrollPage("down");break;case e.ui.keyCode.END:r=false;t._moveFocus(":last");break;case e.ui.keyCode.ENTER:case e.ui.keyCode.SPACE:r=false;t.close(n,true);e(n.target).parents("li:eq(0)").trigger("mouseup");break;case e.ui.keyCode.TAB:r=true;t.close(n,true);break;case e.ui.keyCode.ESCAPE:r=false;t.close(n,true);break;default:r=false;t._typeAhead(n.keyCode,"focus");break}return r});if(n.style=="dropdown"){this.newelement.addClass(t.widgetBaseClass+"-dropdown");this.list.addClass(t.widgetBaseClass+"-menu-dropdown")}else{this.newelement.addClass(t.widgetBaseClass+"-popup");this.list.addClass(t.widgetBaseClass+"-menu-popup")}this.newelement.prepend('<span class="'+t.widgetBaseClass+'-status">'+s[this._selectedIndex()].text+"</span>");this.element.hide();if(this.element.attr("disabled")==true){this.disable()}this.value(this._selectedIndex())},destroy:function(){this.element.removeData(this.widgetName).removeClass(this.widgetBaseClass+"-disabled"+" "+this.namespace+"-state-disabled").removeAttr("aria-disabled");e("label[for="+this.newelement.attr("id")+"]").attr("for",this.element.attr("id")).unbind("click");this.newelement.remove();this.list.remove();this.element.show()},_typeAhead:function(t,n){function o(t,i){s=true;e(t).trigger(n);r._prevChar[1]=i}var r=this;if(!r._prevChar){r._prevChar=["",0]}var i=String.fromCharCode(t);c=i.toLowerCase();var s=false;this.list.find("li a").each(function(t){if(!s){var n=e(this).text();if(n.indexOf(i)==0||n.indexOf(c)==0){if(r._prevChar[0]==i){if(r._prevChar[1]<t){o(this,t)}}else{o(this,t)}}}});this._prevChar[0]=i},_uiHash:function(){return{value:this.value()}},open:function(e){var t=this;var n=this.newelement.attr("aria-disabled");if(n!="true"){this._refreshPosition();this._closeOthers(e);this.newelement.addClass("ui-state-active");this.list.appendTo("body").addClass(t.widgetBaseClass+"-open").attr("aria-hidden",false).find("li:not(."+t.widgetBaseClass+"-group):eq("+this._selectedIndex()+") a")[0].focus();if(this.options.style=="dropdown"){this.newelement.removeClass("ui-corner-all").addClass("ui-corner-top")}this._refreshPosition();this._trigger("open",e,this._uiHash())}},close:function(e,t){if(this.newelement.is(".ui-state-active")){this.newelement.removeClass("ui-state-active");this.list.attr("aria-hidden",true).removeClass(this.widgetBaseClass+"-open");if(this.options.style=="dropdown"){this.newelement.removeClass("ui-corner-top").addClass("ui-corner-all")}if(t){this.newelement[0].focus()}this._trigger("close",e,this._uiHash())}},change:function(e){this.element.trigger("change");this._trigger("change",e,this._uiHash())},select:function(e){this._trigger("select",e,this._uiHash())},_closeOthers:function(t){e("."+this.widgetBaseClass+".ui-state-active").not(this.newelement).each(function(){e(this).data("selectelement").selectmenu("close",t)});e("."+this.widgetBaseClass+".ui-state-hover").trigger("mouseout")},_toggle:function(e,t){if(this.list.is("."+this.widgetBaseClass+"-open")){this.close(e,t)}else{this.open(e)}},_formatText:function(e){return this.options.format?this.options.format(e):e},_selectedIndex:function(){return this.element[0].selectedIndex},_selectedOptionLi:function(){return this._optionLis.eq(this._selectedIndex())},_focusedOptionLi:function(){return this.list.find("."+this.widgetBaseClass+"-item-focus")},_moveSelection:function(e){var t=parseInt(this._selectedOptionLi().data("index"),10);var n=t+e;return this._optionLis.eq(n).trigger("mouseup")},_moveFocus:function(e){if(!isNaN(e)){var t=parseInt(this._focusedOptionLi().data("index"),10);var n=t+e}else{var n=parseInt(this._optionLis.filter(e).data("index"),10)}if(n<0){n=0}if(n>this._optionLis.size()-1){n=this._optionLis.size()-1}var r=this.widgetBaseClass+"-item-"+Math.round(Math.random()*1e3);this._focusedOptionLi().find("a:eq(0)").attr("id","");this._optionLis.eq(n).find("a:eq(0)").attr("id",r)[0].focus();this.list.attr("aria-activedescendant",r)},_scrollPage:function(e){var t=Math.floor(this.list.outerHeight()/this.list.find("li:first").outerHeight());t=e=="up"?-t:t;this._moveFocus(t)},_setData:function(e,t){this.options[e]=t;if(e=="disabled"){this.close();this.element.add(this.newelement).add(this.list)[t?"addClass":"removeClass"](this.widgetBaseClass+"-disabled"+" "+this.namespace+"-state-disabled").attr("aria-disabled",t)}},value:function(e){if(arguments.length){this.element[0].selectedIndex=e;this._refreshValue();this._refreshPosition()}return this.element[0].selectedIndex},_refreshValue:function(){var e=this.options.style=="popup"?" ui-state-active":"";var t=this.widgetBaseClass+"-item-"+Math.round(Math.random()*1e3);this.list.find("."+this.widgetBaseClass+"-item-selected").removeClass(this.widgetBaseClass+"-item-selected"+e).find("a").attr("aria-selected","false").attr("id","");this._selectedOptionLi().addClass(this.widgetBaseClass+"-item-selected"+e).find("a").attr("aria-selected","true").attr("id",t);var n=this.newelement.data("optionClasses")?this.newelement.data("optionClasses"):"";var r=this._selectedOptionLi().data("optionClasses")?this._selectedOptionLi().data("optionClasses"):"";this.newelement.removeClass(n).data("optionClasses",r).addClass(r).find("."+this.widgetBaseClass+"-status").html(this._selectedOptionLi().find("a:eq(0)").html());this.list.attr("aria-activedescendant",t)},_refreshPosition:function(){this.list.css("left",this.newelement.offset().left);var t=this.newelement.offset().top;var n=this.list[0].scrollTop;this.list.find("li:lt("+this._selectedIndex()+")").each(function(){n-=e(this).outerHeight()});if(this.newelement.is("."+this.widgetBaseClass+"-popup")){t+=n;this.list.css("top",t)}else{t+=this.newelement.height();this.list.css("top",t)}}});e.extend(e.ui.selectmenu,{getter:"value",version:"@VERSION",eventPrefix:"selectmenu",defaults:{transferClasses:true,style:"popup",width:null,menuWidth:null,handleWidth:26,maxHeight:null,icons:null,format:null}})})(jQuery);(function(e){e.visualNav=function(t,n){var r=this;r.$el=e(t);r.el=t;r.$el.data("visualNav",r);r.init=function(){r.options=e.extend({},e.visualNav.defaultOptions,n);e("html,body").bind("scroll mousedown DOMMouseScroll mousewheel keyup",function(t){if(t.which>0||t.type=="mousedown"||t.type=="mousewheel")e("html,body").stop()});r.$el.find(r.options.link).click(function(){var t=e(this).attr(r.options.targetAttr);if(e(t).length){newTop=Math.min(e(t).offset().top,e(document).height()-e(window).height());e("html,body").stop().animate({scrollTop:newTop},r.options.animationTime,function(){window.location.hash=t})}return false});e(window).scroll(function(){r.findLocation()}).resize(function(){r.findLocation()})};r.findLocation=function(){var t=e(window).scrollTop();r.$el.find(r.options.link).each(function(n){var i=e(e(this).attr(r.options.targetAttr));if(i.length){i=i.offset().top;if(i>t-r.options.topMargin&&(i<t+r.options.topRange||t+e(window).height()+r.options.bottomMargin>=e(document).height()))r.$el.find(r.options.selectedAppliedTo).removeClass(r.options.selectedClass).eq(n).addClass(r.options.selectedClass)}})};r.init();r.findLocation()};e.visualNav.defaultOptions={link:"a",targetAttr:"href",selectedClass:"selected",selectedAppliedTo:"li",topRange:100,topMargin:100,bottomMargin:20,animationTime:1200};e.fn.visualNav=function(t){return this.each(function(){new e.visualNav(this,t)})};e.fn.getvisualNav=function(){this.data("visualNav")}})(jQuery);var Ajax;if(Ajax&&Ajax!=null){Ajax.Responders.register({onCreate:function(){if($("spinner")&&Ajax.activeRequestCount>0)Effect.Appear("spinner",{duration:.5,queue:"end"})},onComplete:function(){if($("spinner")&&Ajax.activeRequestCount==0)Effect.Fade("spinner",{duration:.5,queue:"end"})}})}var guiders=function(e){var t={};t.version="1.2.0";t._defaultSettings={attachTo:null,buttons:[{name:"Close"}],buttonCustomHTML:"",classString:null,description:"Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.",highlight:null,isHashable:true,offset:{top:null,left:null},onShow:null,overlay:false,position:0,title:"Sample title goes here",width:400,xButton:false};t._htmlSkeleton=["<div class='guider'>","  <div class='guider_content'>","    <h1 class='guider_title'></h1>","    <div class='guider_close'></div>","    <p class='guider_description'></p>","    <div class='guider_buttons'>","    </div>","  </div>","  <div class='guider_arrow'>","  </div>","</div>"].join("");t._arrowSize=42;t._closeButtonTitle="Close";t._currentGuiderID=null;t._guiders={};t._lastCreatedGuiderID=null;t._nextButtonTitle="Next";t._zIndexForHighlight=101;t._addButtons=function(n){var r=n.elem.find(".guider_buttons");if(n.buttons===null||n.buttons.length===0){r.remove();return}for(var i=n.buttons.length-1;i>=0;i--){var s=n.buttons[i];var o=e("<a></a>",{"class":"guider_button",text:s.name});if(typeof s.classString!=="undefined"&&s.classString!==null){o.addClass(s.classString)}r.append(o);if(s.onclick){o.bind("click",s.onclick)}else if(!s.onclick&&s.name.toLowerCase()===t._closeButtonTitle.toLowerCase()){o.bind("click",function(){t.hideAll()})}else if(!s.onclick&&s.name.toLowerCase()===t._nextButtonTitle.toLowerCase()){o.bind("click",function(){t.next()})}}if(n.buttonCustomHTML!==""){var u=e(n.buttonCustomHTML);n.elem.find(".guider_buttons").append(u)}if(n.buttons.length==0){r.remove()}};t._addXButton=function(n){var r=n.elem.find(".guider_close");var i=e("<div></div>",{"class":"x_button",role:"button"});r.append(i);i.click(function(){t.hideAll()})};t._attach=function(n){if(n===null){return}var r=n.elem.innerHeight();var i=n.elem.innerWidth();if(n.position===0||n.attachTo===null){n.elem.css("position","absolute");n.elem.css("top",(e(window).height()-r)/3+e(window).scrollTop()+"px");n.elem.css("left",(e(window).width()-i)/2+e(window).scrollLeft()+"px");return}n.attachTo=e(n.attachTo);var s=n.attachTo.offset();var o=n.attachTo.innerHeight();var u=n.attachTo.innerWidth();var a=s.top;var f=s.left;var l=.9*t._arrowSize;var c={1:[-l-r,u-i],2:[0,l+u],3:[o/2-r/2,l+u],4:[o-r,l+u],5:[l+o,u-i],6:[l+o,u/2-i/2],7:[l+o,0],8:[o-r,-i-l],9:[o/2-r/2,-i-l],10:[0,-i-l],11:[-l-r,0],12:[-l-r,u/2-i/2]};offset=c[n.position];a+=offset[0];f+=offset[1];if(n.offset.top!==null){a+=n.offset.top}if(n.offset.left!==null){f+=n.offset.left}n.elem.css({position:"absolute",top:a,left:f})};t._guiderById=function(e){if(typeof t._guiders[e]==="undefined"){throw"Cannot find guider with id "+e}return t._guiders[e]};t._showOverlay=function(){e("#guider_overlay").fadeIn("fast",function(){if(this.style.removeAttribute){this.style.removeAttribute("filter")}})};t._highlightElement=function(n){e(n).css({"z-index":t._zIndexForHighlight})};t._dehighlightElement=function(t){e(t).css({"z-index":1})};t._hideOverlay=function(){e("#guider_overlay").fadeOut("fast")};t._initializeOverlay=function(){if(e("#guider_overlay").length===0){e('<div id="guider_overlay"></div>').hide().appendTo("body")}};t._styleArrow=function(n){var r=n.position||0;if(!r){return}var i=e(n.elem.find(".guider_arrow"));var s={1:"guider_arrow_down",2:"guider_arrow_left",3:"guider_arrow_left",4:"guider_arrow_left",5:"guider_arrow_up",6:"guider_arrow_up",7:"guider_arrow_up",8:"guider_arrow_right",9:"guider_arrow_right",10:"guider_arrow_right",11:"guider_arrow_down",12:"guider_arrow_down"};i.addClass(s[r]);var o=n.elem.innerHeight();var u=n.elem.innerWidth();var a=t._arrowSize/2;var f={1:["right",a],2:["top",a],3:["top",o/2-a],4:["bottom",a],5:["right",a],6:["left",u/2-a],7:["left",a],8:["bottom",a],9:["top",o/2-a],10:["top",a],11:["left",a],12:["left",u/2-a]};var r=f[n.position];i.css(r[0],r[1]+"px")};t._showIfHashed=function(e){var n="guider=";var r=window.location.hash.indexOf(n);if(r!==-1){var i=window.location.hash.substr(r+n.length);if(e.id.toLowerCase()===i.toLowerCase()){t.show(e.id)}}};t.next=function(){var e=t._guiders[t._currentGuiderID];if(typeof e==="undefined"){return}var n=e.next||null;if(n!==null&&n!==""){var r=t._guiderById(n);var i=r.overlay?true:false;t.hideAll(i);if(e.highlight){t._dehighlightElement(e.highlight)}t.show(n)}};t.createGuider=function(n){if(n===null||n===undefined){n={}}myGuider=e.extend({},t._defaultSettings,n);myGuider.id=myGuider.id||String(Math.floor(Math.random()*1e3));var r=e(t._htmlSkeleton);myGuider.elem=r;if(typeof myGuider.classString!=="undefined"&&myGuider.classString!==null){myGuider.elem.addClass(myGuider.classString)}myGuider.elem.css("width",myGuider.width+"px");var i=r.find(".guider_title");i.html(myGuider.title);r.find(".guider_description").html(myGuider.description);t._addButtons(myGuider);if(myGuider.xButton){t._addXButton(myGuider)}r.hide();r.appendTo("body");r.attr("id",myGuider.id);if(typeof myGuider.attachTo!=="undefined"&&myGuider!==null){t._attach(myGuider);t._styleArrow(myGuider)}t._initializeOverlay();t._guiders[myGuider.id]=myGuider;t._lastCreatedGuiderID=myGuider.id;if(myGuider.isHashable){t._showIfHashed(myGuider)}return t};t.hideAll=function(n){e(".guider").fadeOut("fast");if(typeof n!=="undefined"&&n===true){}else{t._hideOverlay()}return t};t.show=function(n){if(!n&&t._lastCreatedGuiderID){n=t._lastCreatedGuiderID}var r=t._guiderById(n);if(r.overlay){t._showOverlay();if(r.highlight){t._highlightElement(r.highlight)}}t._attach(r);if(r.onShow){r.onShow(r)}r.elem.fadeIn("fast");var i=e(window).height();var s=e(window).scrollTop();var o=r.elem.offset();var u=r.elem.height();if(o.top-s<0||o.top+u+40>s+i){window.scrollTo(0,Math.max(o.top+u/2-i/2,0))}t._currentGuiderID=n;return t};return t}.call(this,jQuery);jQuery.fn.selectToUISlider=function(e){function o(e){return e.constructor==Array}function u(e){return n.tooltipSrc=="text"?i[e].text:i[e].value}function h(e){return(e/(i.length-1)*100).toFixed(2)+"%"}var t=jQuery(this);var n=jQuery.extend({labels:3,tooltip:true,tooltipSrc:"text",labelSrc:"value",sliderOptions:null},e);var r=function(){var e=[];t.each(function(){e.push("handle_"+jQuery(this).attr("id"))});return e}();var i=function(){var e=[];t.eq(0).find("option").each(function(){e.push({value:jQuery(this).attr("value"),text:jQuery(this).text()})});return e}();var s=function(){if(t.eq(0).find("optgroup").size()>0){var e=[];t.eq(0).find("optgroup").each(function(t){e[t]={};e[t].label=jQuery(this).attr("label");e[t].options=[];jQuery(this).find("option").each(function(){e[t].options.push({text:jQuery(this).text(),value:jQuery(this).attr("value")})})});return e}else return null}();var a={step:1,min:0,orientation:"horizontal",max:i.length-1,range:t.length>1,slide:function(e,t){var n=jQuery(t.handle);var r=u(t.value);n.attr("aria-valuetext",r).attr("aria-valuenow",t.value).find(".ui-slider-tooltip .ttContent").text(r);var i=jQuery("#"+n.attr("id").split("handle_")[1]);i.find("option").eq(t.value).attr("selected","selected")},values:function(){var e=[];t.each(function(){e.push(jQuery(this).get(0).selectedIndex)});return e}()};n.sliderOptions=e?jQuery.extend(a,e.sliderOptions):a;t.bind("change keyup click",function(){var e=jQuery(this).get(0).selectedIndex;var t=jQuery("#handle_"+jQuery(this).attr("id"));var n=t.data("handleNum");t.parents(".ui-slider:eq(0)").slider("values",n,e)});var f=jQuery("<div></div>");t.each(function(e){var t="";var i=jQuery("label[for="+jQuery(this).attr("id")+"]");var s=i.size()>0?"Slider control for "+i.text()+"":"";var o=i.attr("id")||i.attr("id","label_"+r[e]).attr("id");if(n.tooltip==false){t=' style="display: none;"'}jQuery("<a "+'href="#" tabindex="0" '+'id="'+r[e]+'" '+'class="ui-slider-handle" '+'role="slider" '+'aria-labelledby="'+o+'" '+'aria-valuemin="'+n.sliderOptions.min+'" '+'aria-valuemax="'+n.sliderOptions.max+'" '+'aria-valuenow="'+n.sliderOptions.values[e]+'" '+'aria-valuetext="'+u(n.sliderOptions.values[e])+'" '+'><span class="screenReaderContext">'+s+"</span>"+'<span class="ui-slider-tooltip ui-widget-content ui-corner-all"'+t+'><span class="ttContent"></span>'+'<span class="ui-tooltip-pointer-down ui-widget-content"><span class="ui-tooltip-pointer-down-inner"></span></span>'+"</span></a>").data("handleNum",e).appendTo(f)});if(s){var l=0;var c=f.append('<dl class="ui-slider-scale ui-helper-reset" role="presentation"></dl>').find(".ui-slider-scale:eq(0)");jQuery(s).each(function(e){c.append('<dt style="width: '+(100/s.length).toFixed(2)+"%"+"; left:"+(e/(s.length-1)*100).toFixed(2)+"%"+'"><span>'+this.label+"</span></dt>");var t=this.options;jQuery(this.options).each(function(e){var r=l==i.length-1||l==0?'style="display: none;"':"";var s=n.labelSrc=="text"?t[e].text:t[e].value;c.append('<dd style="left:'+h(l)+'"><span class="ui-slider-label">'+s+'</span><span class="ui-slider-tic ui-widget-content"'+r+"></span></dd>");l++})})}else{var c=f.append('<ol class="ui-slider-scale ui-helper-reset" role="presentation"></ol>').find(".ui-slider-scale:eq(0)");jQuery(i).each(function(e){var t=e==i.length-1||e==0?'style="display: none;"':"";var r=n.labelSrc=="text"?this.text:this.value;c.append('<li style="left:'+h(e)+'"><span class="ui-slider-label">'+r+'</span><span class="ui-slider-tic ui-widget-content"'+t+"></span></li>")})}if(n.labels>1)f.find(".ui-slider-scale li:last span.ui-slider-label, .ui-slider-scale dd:last span.ui-slider-label").addClass("ui-slider-label-show");var p=Math.max(1,Math.round(i.length/n.labels));for(var d=0;d<i.length;d+=p){if(i.length-d>p){f.find(".ui-slider-scale li:eq("+d+") span.ui-slider-label, .ui-slider-scale dd:eq("+d+") span.ui-slider-label").addClass("ui-slider-label-show")}}f.find(".ui-slider-scale dt").each(function(e){jQuery(this).css({left:(100/s.length*e).toFixed(2)+"%"})});f.insertAfter(jQuery(this).eq(this.length-1)).slider(n.sliderOptions).attr("role","application").find(".ui-slider-label").each(function(){jQuery(this).css("marginLeft",-jQuery(this).width()/2)});f.find(".ui-tooltip-pointer-down-inner").each(function(){var e=jQuery(".ui-tooltip-pointer-down-inner").css("borderTopWidth");var t=jQuery(this).parents(".ui-slider-tooltip").css("backgroundColor");jQuery(this).css("border-top",e+" solid "+t)});var v=f.slider("values");if(o(v)){jQuery(v).each(function(e){f.find(".ui-slider-tooltip .ttContent").eq(e).text(u(this))})}else{f.find(".ui-slider-tooltip .ttContent").eq(0).text(u(v))}return this};$.widget("bal.imagemap",{_create:function(){this.image=this.element.find("img");this.originalWidth=parseInt(this.image.attr("originalWidth"));this.element.find("a").each(function(){$(this).data("originalCoords",$(this).attr("style"))});if(this.image[0].clientWidth==0){var e=this;this.image.load(function(){e.resize()})}else{this.resize()}},resize:function(){var e=this,t=this.image.width(),n=this.image.position().left;this.element.find("a").each(function(){$(this).attr("style",$($(this).data("originalCoords").split(";")).map(function(r,i){var s=Math.round(parseInt(i.replace(/[^\d]+/,""),10)*t/e.originalWidth);if(i.indexOf("left")>=0){s+=n}return i.replace(/\d+/,s)}).toArray().join(";"))})}});(function(){"use strict";var e=$();$.fn.extend({registerMenu:function(){e=e.add(this);return this},showMenu:function(){e.not(this).hide();return this.show()}})})();$.extend($.ui.tooltip.prototype.options,{position:{my:"center bottom",at:"center top",offset:"0 -5",collision:"fit"}});$.widget("bal.menudialog",{_create:function(){function e(e){e.hide();$(document).unbind("."+e.attr("id"))}var t=$(this.element.attr("href")).registerMenu();this.element.click(function(n){n.preventDefault();n.stopPropagation();if(t.is(":visible")){e(t);return}t.showMenu().css({top:0,left:0}).position({my:"right top",at:"right bottom",of:this,collision:"fit none"});$(document).bind("click."+t.attr("id"),function(n){if($(n.target).closest("#"+t.attr("id")).length)return;e(t)}).bind("keydown."+t.attr("id")).keydown(function(n){if(n.keyCode==$.ui.keyCode.ESCAPE){e(t)}})})}});$.widget("bal.simplemenu",{_create:function(){var e=this.element.next().menu().registerMenu();this.element.buttonlite().click(function(t){t.preventDefault();t.stopPropagation();if(e.is(":visible")){e.hide();return false}e.showMenu().appendTo("body").css({top:0,left:0}).position({my:"left top",at:"left bottom",of:this});$(document).one("click",function(){e.hide()})})}});$.widget("bal.abuttonmenu",{options:{align:"left"},_create:function(){var e=this.element.find("ul").menu({input:this.element,select:function(e,t){}}).registerMenu().hide();var t=this.options.align;this.element.addClass(this.widgetName).find("a:first").buttonlite().next().buttonlite().click(function(n){n.preventDefault();n.stopPropagation();e.showMenu().appendTo("body").css({top:0,left:0}).position({my:t+" top",at:t+" bottom",of:$(this),collision:"fit"});$(document).one("click",function(){e.hide()})}).keydown(function(t){if(t.keyCode===$.ui.keyCode.TAB){e.hide()}})}});$.widget("mybalsamiq.mybDialog",$.ui.dialog,{_create:function(){this._super();this.element.keydown(function(e){if($(e.target).is(":not(textarea)")&&e.which===13){e.preventDefault();var t=$(e.target).closest(".ui-dialog");if(t.find("button.ui-state-focus").click().size()===0){t.find("button.submit").click()}}})},open:function(e){var t=this._superApply(e);var n=this.element.find("input:visible:first");if(n.size()===0){n=$(this.element).closest(".ui-dialog").find("button:visible:not([class*=ui-dialog-titlebar-close]):last")}n.focus();return t}});disableOnNullSelection=function(e,t){$(e).change(function(){$("option:selected",this).each(function(){if($(this).val()==="null")$(t).attr("disabled","disabled").addClass("ui-state-disabled");else $(t).removeAttr("disabled").removeClass("ui-state-disabled")})})};getViewOptions=function(){var e=$.cookie("myBalsamiqPrototypeViewOptions");if(typeof e==="undefined"){e={showBar:true,showLinks:false}}else{e=$.parseJSON(e)}return e};var MyBalsamiqViewOptions=function(e){this.appDomain=e};MyBalsamiqViewOptions.prototype.read=function(){return getViewOptions()};MyBalsamiqViewOptions.prototype.save=function(e){$.cookie("myBalsamiqPrototypeViewOptions",$.toJSON(e),{path:"/",domain:this.appDomain,secure:location.protocol==="https:"})};basename=function(e,t){var n=e.replace(/^.*[\/\\]/g,"");if(typeof t=="string"&&n.substr(n.length-t.length)==t){n=n.substr(0,n.length-t.length)}return n};collectTextNodes=function(e,t){for(var n=e.firstChild;n!==null;n=n.nextSibling){if(n.nodeType===3)t.push(n);else if(n.nodeType===1)collectTextNodes(n,t)}};formatDatesInTimezone=function(){$("span.date:empty").each(function(){var e=$(this);var t=moment(e.data("millis"));e.text(t.format("MMM D YYYY, h:mm A"))})};$(function(){$(document).on("click",".post-link",function(e){e.preventDefault();$.ajax({type:"POST",url:$(this).attr("href"),beforeSend:function(e){sendToken(e)},xhrFields:{withCredentials:true}}).done(function(e,t,n){if(e.redirectUrl){turnOffPubnub();window.location=e.redirectUrl}else if(e.message){showNotification(e.message)}else{turnOffPubnub();window.location.reload()}})}).on("click",".btn-post-action",function(){$.post($(this).data("action"),function(e,t,n){if(e.redirectUrl){turnOffPubnub();window.location=e.redirectUrl}else if(e.message){showNotification(e.message)}else{turnOffPubnub();window.location.reload()}})}).on("click",".disabled-link",function(e){e.preventDefault()}).on("click",".btn-action",function(e){e.preventDefault();window.location=$(this).data("action")});$("#mobiact").click(function(e){e.preventDefault();$("#umenu").slideToggle("fast")});formatDatesInTimezone();$.fn.safeRender=function(){return this.each(function(){var e=$(this);var t=e.data("value");if(typeof t!=="undefined"){var n=decodeURIComponent(escape(window.atob(t)));var r=e.data("attr");var i=e.data("data-item");if(typeof r!=="undefined"){e.attr(r,n)}else if(typeof i!=="undefined"){e.data(i,n)}else{var s=$("<span>");s.text(n);e.append(s)}}else{console&&console.log("Missing value data attribute.")}})};$(".safe-render").safeRender()});(function(e){"use strict";e.fn.extend({confirm:function(t){var n={id:"confirm-dialog",width:420,height:"auto",zIndex:1e4,autoOpen:false,level:"warn",title:"Please confirm your choice",message:"Are you sure?",beforeOpenHandler:null,okButtonText:"OK",cancelButtonText:"Cancel",okButtonHandler:null,cancelButtonHandler:null};var r=e.extend({},n,t);var i=function(){switch(r.level){case"error":return e('<div id="'+r.id+'" title="'+r.title+'" class="hide"><p class="message error"><span class="warn">'+r.message+"</span></p></div>");case"warn":default:return e('<div id="'+r.id+'" title="'+r.title+'" class="hide"><p><span class="ui-icon ctrl-alert" style="float:left; margin:0 7px 20px 0;"></span><span>'+r.message+"</span></p></div>")}}();var s={};s[r.cancelButtonText]=function(){e(this).mybDialog("close");if(r.cancelButtonHandler!==null){r.cancelButtonHandler.call(this)}};s[r.okButtonText]=function(){e(this).mybDialog("close");if(r.okButtonHandler!==null){r.okButtonHandler.call(this)}};i.mybDialog({autoOpen:r.autoOpen,width:r.width,height:r.height,zIndex:r.zIndex,modal:true,buttons:s}).mybDialog("widget").find("button:contains('"+r.okButtonText+"')").addClass("submit").end().find("button:contains('"+r.cancelButtonText+"')").addClass("cancel");return this.each(function(){var t=e(this);t.click(function(e){var n=true;e.preventDefault();if(r.beforeOpenHandler){if(r.beforeOpenHandler.call(t,i)===false){n=false}}if(n===true){i.mybDialog("open")}})})}})})(jQuery);configureInvitesList=function(){$(".resend-invite").on("click",function(e){e.preventDefault();var t=$(this).closest("li");if(!t.data("processing")){t.data("processing",true);t.css("opacity",.3);var n=$(this).attr("href");$.ajax({type:"POST",url:n,beforeSend:function(e){sendToken(e)}}).done(function(e,n,r){t.css("opacity","");t.data("processing",false);showNotification(e.message)})}});$(".cancel-invite").on("click",function(e){e.preventDefault();var t=$(this);var n=t.closest("li");if(!n.data("processing")){n.data("processing",true);n.css("opacity",.3);var r=t.attr("href");$.ajax({type:"POST",url:r,beforeSend:function(e){sendToken(e)}}).done(function(e,t,r){n.css("opacity","");n.data("processing",false);if(e.success){n.clearQueue().fadeOut("slow")}if(e.message){showNotification(e.message)}})}})};configureSiteAdmin=function(e){$("#siteWideNotificationsLink").click(function(t){t.preventDefault();var n=$(this);var r=n.closest("form");$.ajax({type:"POST",url:e.toggleWatchUrl,beforeSend:function(e){sendToken(e)}}).done(function(e,t,n){$("#siteWideNotificationsLink").text(e.watching?"Unsubscribe":"Bcc: me on notifications")})});disableOnNullSelection("#newOwnerId","#submitChangeSiteOwner")};configureRevokeBillingDialog=function(e){$("#revoke-billing-admin-dialog").mybDialog({autoOpen:false,height:"auto",width:420,modal:true,zIndex:5e4,buttons:{Cancel:function(){$(this).mybDialog("close")},Revoke:function(){var t=$(this);$.post(e.url,{billingAdminId:t.data("userId")},function(e,t){if(e.success){$("#payment").load($("#payment").data("refreshUrl"),function(){configureBillingAdminForm()})}if(e.message){showNotification(e.message)}});$(this).mybDialog("close")}},open:function(){$(this).find("#billing-admin-name").text($(this).data("userName"))}}).mybDialog("widget").find("button:contains('Revoke')").addClass("submit").end().find("button:contains('Cancel')").addClass("cancel")};configureBillingAdminForm=function(){disableOnNullSelection("#billingAdminId","#submitBillingAdmin");$("#revoke-billing-admin-link").click(function(e){e.preventDefault();var t=$(this);$("#revoke-billing-admin-dialog").data("userId",t.data("userId")).data("userName",t.data("userName")).mybDialog("open")})};$(function(){configureBillingAdminForm()});var loadAndShowManageProjectMembershipDialog=function(e){var t=$("#manage-project-membership-dialog-container");t.empty();t.load(e,function(e,t,n){configureAndShowManageProjectMembershipDialog()})};var parseForm=function(){var e=[];$("#manage-project-membership-form input[type=checkbox]").each(function(){e.push({projectId:$(this).attr("value"),selected:$(this).is(":checked")})});var t={projects:$.toJSON(e)};var n=$("#invite-email");if(n.length>0){t.emails=n.val()}return t};var configureAndShowManageProjectMembershipDialog=function(){var e=$("#user-menu-manage-project-membership-dialog").data("submit-button-text");$("#user-menu-manage-project-membership-dialog").mybDialog({autoOpen:true,height:"auto",width:540,modal:true,zIndex:5e4,buttons:[{text:"Cancel","class":"cancel",click:function(){$(this).mybDialog("close")}},{text:e,"class":"submit",click:function(){var e=$("#manage-project-membership-form");var t=e.data("url");$.ajax({type:"POST",url:t,data:parseForm(),beforeSend:function(e){sendToken(e)}}).done(function(e){showNotification(e.message)});$(this).mybDialog("close")}}],open:function(){$(this).css("overflow","hidden")},close:function(){$(this).empty().remove()}})};var setupStaffMembersMenu=function(){$("body").append('<div id="manage-project-membership-dialog-container"></div>');$(".usermenubutton").simplemenu();if(typeof configureRemoveUserDialog!=="undefined"){$(function(){configureRemoveUserDialog($(".user-menu-remove-user-item"))})}$(".user-menu-edit-user-settings-item").on("click",function(e){e.preventDefault();loadAndShowUserInfoDialog($(this).attr("href"))});$(".user-menu-change-password-item").on("click",function(e){e.preventDefault();loadAndShowChangePasswordDialog($(this).attr("href"))});$(".user-menu-change-photo-item").on("click",function(e){e.preventDefault();loadAndShowChangePhotoDialog($(this).attr("href"))});$(".user-menu-manage-projects-item").on("click",function(e){e.preventDefault();loadAndShowManageProjectMembershipDialog($(this).attr("href"))});$(".user-menu-toggle-autoadd-item").on("click",function(e){e.preventDefault();var t=$(this);var n=t.find("input:checkbox");var r=t.attr("href");$.ajax({type:"POST",url:r,beforeSend:function(e){sendToken(e)}}).done(function(e){if(e.success){n.prop("checked",e.autoAdd)}if(e.message){showNotification(e.message)}})});$(".user-menu-follow-link").on("click",function(e){e.preventDefault();window.location=$(this).attr("href")})};$(function(){$("#addNonStaffButton").on("click",function(e){e.preventDefault();loadAndShowManageProjectMembershipDialog($(this).data("url"))});setupStaffMembersMenu();configureInvitesList()});(function(){var e=function(e){if(e.hasClass("virgin")){e.removeClass("virgin");e.val("")}};var t=function(e){e.removeClass("error");e.parent().removeClass("error_bg");e.parent().parent().find("img").css("display","none");e.parent().parent().find("label").removeClass("error");e.parent().find("span.error").css("visibility","hidden")};var n=function(e){e.parent().parent().find("img.valid").css("display","")};var r=function(e){e.parent().parent().find("img.spinner").css("display","")};var i=function(e){e.parent().parent().find("img.spinner").css("display","none")};var s=function(e,t){e.parent().parent().find("img.error").css("display","");e.parent().parent().find("label").addClass("error");e.parent().find("span.error").css("visibility","visible").html(t);e.addClass("error");e.parent().addClass("error_bg")};var o=function(){e($(this));if(!$(this).hasClass("small")){$(this).parent().addClass("focused_bg")}};var u=function(){$(this).parent().removeClass("focused_bg")};var a=function(){e($(this));t($(this))};var f=function(e,t,o){r(e);$.get(t,o,function(t,r){i(e);if(t.success){n(e)}else{s(e,t.message)}})};var l=function(){t($(this));var e=$("#username").data("original-username");if($("#username").val().toLowerCase()==e.toLowerCase()||$("#username").val()==""){return}f($(this),$("#username").data("url"),{username:$("#username").val()})};var c=function(){t($(this));if($("#skypeId").val()==""){return}f($(this),$("#skypeId").data("url"),{skypeId:$("#skypeId").val()})};setWorldmapCoordinates=function(e,t){document.getElementById("worldmapX").value=e;document.getElementById("worldmapY").value=t};configureInfoSettingsPanel=function(){$(".input").focus(o).blur(u);$(".validating").focus(o).blur(u);$(".error").focus(o).blur(u);$(".small").focus(o).blur(u);$("#username").change(l);$("#skypeId").change(c)};var h={};configurePhotoSettingsPanel=function(){h={url:$("#upload-photo-file-input").data("url"),deletePhoto:false,fileInputData:null};var e=$("#upload-photo-button").button();$("#upload-photo-file-input").fileupload({dataType:"json",autoUpload:false,url:h.url,singleFileUploads:true,headers:{"X-Authorization":"Bearer "+getCsrfToken()}}).bind("fileuploadadd",function(e,t){var n=t.files[0];if(n.name!=undefined&&!n.name.match(/(\.|\/)(gif|jpg|jpeg|png)$/i)){showNotification("Please choose a GIF, JPG, or PNG file.");$("#photo-filename").text("");h.fileInputData=null}else if(n.size!=undefined&&n.size>10*1024*1024){showNotification("Please choose a file up to 10 MB.");$("#photo-filename").text("");h.fileInputData=null}else{h.fileInputData=t;h.deletePhoto=false;$("#photo-filename").text(n.name)}}).bind("fileuploaddone",function(e,t){$("#save-photo-form").removeClass("loading")});e.removeClass("ui-state-focus");e.find("span").show().end().removeClass("hide");$("#upload-photo-file-input").width(400).position({of:e,my:"right top",at:"right top"});$(".input").focus(o).blur(u);$(".validating").focus(o).blur(u);$(".error").focus(o).blur(u);$(".small").focus(o).blur(u);$("#delete-photo-link").click(function(e){e.preventDefault();$("#photo").clearQueue().animate({opacity:0},"slow");$(this).closest("p").hide();h.deletePhoto=true})};configurePasswordSettingsPanel=function(){$("#password").change(function(){t($(this));if($(this).val().length<6){s($(this),"You need to enter a password that's at least 6 characters long")}else{n($(this))}if($("#password2").val().length>0){$("#password2").change()}});$("#password2").change(function(){t($(this));if($("#password").val()==$(this).val()){n($(this));return true}else{s($(this),"Passwords don't match.");return false}})};var p=function(){var e=$("#user-info-dialog-container");if(e.length===0){$("body").append('<div id="user-info-dialog-container"></div>');e=$("#user-info-dialog-container")}return e};var d=function(e,t){var n=$(e+" form").serializeArray();var r=$(e+" form").attr("action");$.post(r,n,function(e){t(e.success);if(e.message){showNotification(e.message)}})};var v=function(e,t){var n=function(e){t(e.success);if(e.message){showNotification(e.message)}};var r=function(){t(false)};if(h.deletePhoto){$.ajax({type:"POST",url:h.url,data:{deletePhoto:true},beforeSend:function(e){sendToken(e)}}).done(n).fail(r)}else if(h.fileInputData){h.fileInputData.submit().success(n).error(r)}else{t(true)}};loadAndShowUserInfoDialog=function(e){var t=p();t.empty();t.load(e,function(){g("#user-info-dialog",800,590,configureInfoSettingsPanel,d)})};loadAndShowChangePasswordDialog=function(e){var t=p();t.empty();t.load(e,function(){g("#change-password-dialog",600,500,configurePasswordSettingsPanel,d)})};loadAndShowChangePhotoDialog=function(e){var t=p();t.empty();t.load(e,function(){g("#change-photo-dialog",600,350,configurePhotoSettingsPanel,v)})};var m=function(){$("body").append('<div id="screen-overlay" class="ui-widget-overlay" style="width: 100%; height: 100%; opacity: 0; z-index: 60000;"></div>');return $("#screen-overlay")};var g=function(e,t,n,r,i){$(e).mybDialog({autoOpen:true,width:t,height:n,modal:true,zIndex:5e4,buttons:[{text:"Cancel","class":"cancel",click:function(){$(this).mybDialog("close")}},{text:"Save Changes","class":"submit",click:function(t){var n=$(t.currentTarget);var r=m();n.addClass("loading");var s=$(this);i(e,function(e){r.remove();n.removeClass("loading");if(e){s.mybDialog("close")}})}}],open:function(){$(this).css("overflow","auto");r()},close:function(){$(this).empty().remove()}})};configurePhotoSettingsPanelForFormPage=function(){configurePhotoSettingsPanel();return function(e){v(null,e)}}})()